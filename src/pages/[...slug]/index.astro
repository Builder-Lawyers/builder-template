---
import "@/shared/styles/index.css";
import type { Widget, PageData } from "@/components/fabric/fabric";
import { astroFactory } from "@/components/fabric/fabric";
import { pageData } from "../page";
import type { Page } from "../../components/fabric/fabric";

export function getStaticPaths() {
  const pages: Page[] = pageData.pages;
  return pages.map((page) => {
    return {
      params: { slug: page.slug },
      props: { ...page },
    };
  });
}

const props: Page = Astro.props;
---

<html>
  <title>{props.title}</title>

  <body class="max-w-[1440px] m-auto flex flex-col justify-center w-full">
    {
      props?.widgets?.map((widget) => {
        const Component = astroFactory[widget.type];
        return <Component {...widget.props} />;
      })
    }
  </body>
</html>
